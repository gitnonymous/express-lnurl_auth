<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>login</title>
</head>
<body>
    <button id="login">login</button>
<script src="/socket.io/socket.io.js"></script>
<script>
    const socket = io()
    socket.on('login', data =>{
        data.id == socket.id && (
            location.href = 'api/?id='+data.msg
        )
    })
    document.getElementById('login').addEventListener('click', async e=>{
        const cid =  Object.assign({},...document.cookie.split(';').map(x=> ({[x.split('=')[0].trim()]: x.split('=')[1]})))
        const {success, error} = await(await fetch('/webhook/lnurlauth?cid='+cid._wlio)).json()   
        })
</script>
</body>
</html>